<div class=" content" itemscope itemtype="http://schema.org/NewsArticle">
    <div>
        <meta itemprop="image" content="{{'https://www.chemin-neuf.fr' + rubedo.imageUrl.getUrlByMediaId(fieldEntity['image'],{width:'768px',mode:'boxed'}) }}" />
        <meta itemprop="author" content="{{contentDetailCtrl.content.createUser.fullName}}">
        <meta itemprop="publisher" content="{{rubedo.current.site.author}}">
        <meta itemprop="datePublished" content="{{contentDetailCtrl.content.createTime *1000 | date:'yyyy-MM-ddTHH:mm:ssZ' }}">
        <meta itemprop="dateModified" content="{{contentDetailCtrl.content.lastUpdateTime *1000 | date:'yyyy-MM-ddTHH:mm:ssZ' }}">
        <div class="post-header">
            <rubedo-field field = "{{contentDetailCtrl.getFieldByName('text')}}" ></rubedo-field><!--Texte-->
        </div>
        <rubedo-field field = "{{contentDetailCtrl.getFieldByName('image')}}" ></rubedo-field><!--Texte-->
        <div class="post-content">
            <rubedo-field field = "{{contentDetailCtrl.getFieldByName('richText')}}" ></rubedo-field><!--Texte-->
        </div>
            
            
    </div>


			
<header class="container-fluid content" afkl-lazy-image="{{rubedo.imageUrl.getUrlByMediaId(fieldEntity['image'] ,{width:'768px',mode:'boxed'})}} 480w,{{rubedo.imageUrl.getUrlByMediaId(fieldEntity['image'] ,{width:'1600px',mode:'boxed'})}} 1200w"
	ng-if="fieldEntity['image']"  afkl-lazy-image-options='{"background": true}'>
	<div class="text-article container">
		<p class='capital'>{{contentDetailCtrl.content.createTime*1000 | date:'longDate'}}</p>
		<div field = "{{contentDetailCtrl.getFieldByName('text')}}" >
			<h1 class="balance-text" ng-if="!fieldEditMode" itemprop="headline">{{fieldEntity['text']}}</h1>
			<h1 ng-if="fieldEditMode"
			   ng-controller="RTEFieldController as rteFieldCtrl"
			   ckeditor="editorOptions"
			   contenteditable="true"
			   ready="setCKEIsReady()"
			   ng-model="fieldEntity['text']"
			   output-plain-text="true"
			   ng-bind-html="rteFieldCtrl.html">
			</h1>
		</div>

	</div>
</header>
<header class="container-fluid" ng-if="!fieldEntity['image']">
	<div class="text-article container">
		<p class='capital txt-red' style="text-shadow: none">{{contentDetailCtrl.content.createTime*1000 | date:'longDate'}}</p>
		<div field = "{{contentDetailCtrl.getFieldByName('text')}}" >
			<h1 class="text-left" ng-if="!fieldEditMode" style="text-shadow: none">{{fieldEntity['text']}}</h1>
			<h1 ng-if="fieldEditMode"
			   ng-controller="RTEFieldController as rteFieldCtrl"
			   ckeditor="editorOptions"
			   contenteditable="true"
			   ready="setCKEIsReady()"
			   ng-model="fieldEntity['text']"
			   output-plain-text="true"
			   ng-bind-html="rteFieldCtrl.html">
			</h1>
		</div>

	</div>
</header>

<div class="container">
	<div class="row">
		<div class="col-xs-12">
			<div class="text-article">

				<div class="col-xs-12 col-sm-4 col-sm-push-8">
					<div data-addthis-toolbox  data-title="{{rubedo.current.page.title}}" data-summary="{{contentDetailCtrl.content.fields.summary}}"  class="addthis_toolbox socials" >
						<!--<a class="addthis_button_facebook_like txt-red" fb:like:layout="button_count"><img class="hidden"><i class="fa fa-thumbs-up" ></i> </a> -->
						<a class="addthis_button_facebook txt-red"><img class="hidden"><i class="fa fa-facebook-official" data-toggle="tooltip" title="Partager sur Facebook"></i> </a>
						<a class="addthis_button_twitter txt-red"><img  class="hidden"><i class="fa fa-twitter-square" data-toggle="tooltip" title="Partager sur Twitter"></i> </a>
						<a class="addthis_button_email txt-red"><img class="hidden"><i class="fa fa-share-square" data-toggle="tooltip" title="Envoyer par mail"></i></a>
						<a class="addthis_button_expanded txt-red"><img class="hidden"><i class="fa fa-plus-square" data-toggle="tooltip" title="Plus d'options"></i></a><br/>
						<span class="txt-red capital" style="display: inline-block" ng-if="nbOfLikes>0">{{nbOfLikes}} partages</span>
					</div>
					{{contentDetailCtrl.tooltips()}}
				</div>
				
				<div class="col-xs-12 col-sm-8 col-sm-pull-4">
					<rubedo-field class="capital tags"  field =  "{{contentDetailCtrl.getFieldByName('author')}}"></rubedo-field><!--Auteur-->					
				</div>
			</div>
		</div>
		<div class="col-xs-12 " ng-if="fieldEntity['video']">
			<div class="text-article">
				<jwplayer video-url="{{fieldEntity['video']}}"></jwplayer>
			</div>
		</div>
		<div class="col-xs-12">
			<div class="text-article">
				<rubedo-field field = "{{contentDetailCtrl.getFieldByName('richText')}}" ></rubedo-field><!--Texte-->
				<rubedo-field field = "{{contentDetailCtrl.getFieldByName('copyrights')}}" class="copyrights"></rubedo-field><!--Copyrights-->
			</div>
		</div>
		<div class="col-xs-12">
			<div class="text-article">
				<rubedo-field field = "{{contentDetailCtrl.getFieldByName('externalMedia')}}"  ng-if="fieldEntity['externalMedia']" ></rubedo-field><!--Video-->
				<rubedo-field field = "{{contentDetailCtrl.getFieldByName('audio')}}"   ng-if="fieldEntity['audio']"></rubedo-field><!--Audio-->							
			</div>
		</div>
	</div>
	<div class="row" >
		<div class="text-article">
			<span ng-repeat="taxonomy in contentDetailCtrl.content.taxonomy['5524db6945205e627a8d8c4e']" class="capital tags">
				{{contentDetailCtrl.getTermInTaxo("5524db6945205e627a8d8c4e",taxonomy)}}
			</span>
		</div>
		
	</div>
				<!---ANCIENS ALBUMS (non embedded images)-->
<div ng-if="contentDetailCtrl.content.fields.images && contentDetailCtrl.content.fields.images.length>0" class="row">
				<div class="grid" masonry masonry-options="{ gutter: '.gutter-sizer',percentPosition: true }" reload-on-resize>
								<div class="masonry-brick" ng-repeat="image in contentDetailCtrl.content.fields.images track by $index"  >
												<img ng-src="{{rubedo.imageUrl.getUrlByMediaId(image,{width:'900',height:'600',mode:'boxed'})}}" style="width:100%"/>
												<div class="img-description hidden-xs" data-toggle="modal" data-target="#rubedoGalleryDetailModal{{contentDetailCtrl.content.id}}" ng-click="contentDetailCtrl.loadModal($index,false)">
																<i class="fa fa-expand"></i>
												</div>
								</div>
								<div class="gutter-sizer"></div>
				</div>
		<!-- The modal dialog, which will be used to wrap the lightbox content -->
				<div class="modal fade hidden-xs rubedoGalleryDetailModal" id="rubedoGalleryDetailModal{{contentDetailCtrl.content.id}}" tabindex="1" ng-keydown="contentDetailCtrl.changeImageKey($event,false)">
								<a class="prev" ng-click="contentDetailCtrl.changeImage('left',false)" ng-if="contentDetailCtrl.currentIndex>0">‹</a>
								<a class="next" ng-click="contentDetailCtrl.changeImage('right',false)" ng-if="contentDetailCtrl.currentIndex<(contentDetailCtrl.content.fields.images).length-1">›</a>
								<a class="close" data-dismiss="modal">×</a>
								<div class="modal-dialog modal-lg">
												<div class="modal-body">
																<img class="img-responsive" ng-src="{{rubedo.imageUrl.getUrlByMediaId(contentDetailCtrl.currentImage,{width:'900',height:'600',mode:'boxed'})}}">
											</div>
		
								</div>
				</div>
</div>
	
	<div class="row border-top" style="margin-top:24px" ng-if="contentDetailCtrl.linkedContents[0]">
		<h3 class="text-center" style="margin-bottom:24px">{{rubedo.translate("Block.Actus.ReadMore", "À lire aussi :")}}</h3>
		<div class="col-xs-12 col-sm-4 text-center" ng-repeat="content in contentDetailCtrl.linkedContents">
			<a ng-href="{{content.url |cleanUrl}}">
				<img ng-if="content['fields.image'][0]" ng-src="{{rubedo.imageUrl.getUrlByMediaId(content['fields.image'][0],{width:'420px',height:'200px',mode:'crop'})}}" style="width:90%">
				<img ng-if="!content['fields.image'][0]" src="/theme/cte/img/icons/video-thumb.jpg" style="width:120px">
				<h3>{{content.title}}</h3>
			</a>	
		</div>
	</div>
</div>

<div style="margin-top:24px"></div>
</div>

