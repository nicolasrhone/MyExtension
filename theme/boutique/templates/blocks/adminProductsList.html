<div ng-if="rubedo.current.user" ng-controller="AdminProductsListController as ctrl">
    
    <h2>Recherche rapide</h2>
    <div class="raccourcis_container">
        <div class="raccourci" ng-repeat="raccourci in ctrl.raccourcis" ng-attr-id="{{ 'raccourci_' + raccourci.id }}" ng-click="ctrl.setRaccourci(raccourci)">{{ raccourci.label }}</div>
    </div>

    <h2>Recherche avanc√©e</h2>
    <div class="search_container">
        <select ng-model="search_field" class="search field first" ng-options="field.label for field in ctrl.fields">
            <option></option>
        </select>
        <select ng-if="search_field && ctrl.subfields[search_field]" ng-model="ctrl.search_subfield" class="search field" ng-change="ctrl.search('skip')">
            <option ng-repeat="field in ctrl.subfields[search_field]" ng-value="field.id">{{field.label}}</option>
        </select>
        <input ng-if="ctrl.field_types[search_field] != 'boolean'" class="field" name="search" type="text" ng-model="ctrl.search_text" ng-keypress="ctrl.search($event)">
        <button class="btn btn-primary field fa fa-arrow-right" ng-click="ctrl.search('skip')"></button>
    </div>
    
    <div class="info" ng-if="!ctrl.loading">{{ctrl.products.length}} / {{ctrl.allProducts.length}} produits</div>
    <div class="panel panel-default">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th ng-click="ctrl.sortProducts('text')">Nom du produit</th>
                    <th ng-click="ctrl.sortProducts('details/sku')">SKU</th>
                    <th ng-click="ctrl.sortProducts('details/stock')">Stock</th>
                    <th ng-click="ctrl.sortProducts('online')">{{ rubedo.translate('Blocks.UserOrders.Status') }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in ctrl.products track by $index">
                    <td><img ng-if="ctrl.products.length < 70 && item.fields.image" ng-src="{{rubedo.imageUrl.getUrlByMediaId(item.fields.image ,{width:'50px',mode:'boxed'})}}" alt="product img"></td>
                    <td class="clickable" ng-click="ctrl.goToContentPage(item.id, item.online)">{{ item.text }}</a></td>
                    <td>{{ item.productProperties.sku }}</td>
                    <td data-toggle="tooltip" title="{{ item.productProperties.sku }}" ng-click="ctrl.copyToClipboard(item.productProperties.sku)">{{ item.details.stock }}</td>
                    <td>{{ item.online }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="loading" ng-if="ctrl.loading"><i class="fa fa-spinner fa-pulse loading"></i></div>
</div>


<style>
/* ================================ */
/*          RACCOURCIS              */
/* ================================ */

div.raccourcis_container {
    display: flex;
    flex-wrap: wrap;
    margin-bottom: 1rem;
}

div.raccourci {
    background-color: #d5c5b5;
    padding: 0.5rem 1rem;
    margin-right: 1rem;
    border-radius: 50px;
    color: white;
    cursor: pointer;
    font-size: 1rem;
    font-family: calibri;
    box-shadow: #6f6860 0 1px 3px;
    transition: all 0.2s;
}

div.raccourci_active {
    box-shadow: inset #6f6860 0 1px 3px;
    transition: all 0.2s;
}


/* ================================ */
/*          RECHERCHE               */
/* ================================ */

.search_container {
    margin-bottom: 2rem;
}

.field {
    height: 32px;
}
.field:active, .field:focus {
    outline: none;
}

select.field {
    padding-left: 0.7rem;
    border: none;
    background-color: #d5c5b5;
    cursor: pointer;
}

select.first {
    border-radius: 50px 0 0 50px;
}

input.field {
    border: 1px solid #bdaea0;
}

/* ================================ */
/*          TABLEAU                 */
/* ================================ */

th {
    cursor: pointer;
}

.clickable {
    cursor: pointer;
}

.loading {
    font-size: 3rem;
    text-align: center;
    margin: auto;
}

.badge-success {
    background-color: green;
}
</style>