<div ng-if="rubedo.current.user" ng-controller="AdminProductsListController as ctrl">
    
    <h2>Recherche rapide</h2>
    <div class="raccourcis_container">
        <div class="raccourci" ng-repeat="raccourci in ctrl.raccourcis" ng-attr-id="{{ 'raccourci_' + raccourci.id }}" ng-click="ctrl.setRaccourci(raccourci)">{{ raccourci.label }}</div>
    </div>

    <h2>Recherche avanc√©e</h2>
    <div class="search_container">
        <select ng-model="ctrl.search_field" class="search field">
            <option ng-repeat="field in ctrl.fields" ng-value="field.id">{{field.label}}</option>
        </select>
        <select ng-if="ctrl.search_field && ctrl.subfields[ctrl.search_field]" ng-model="ctrl.search_subfield" class="search subfield" ng-change="ctrl.search('skip')">
            <option ng-repeat="field in ctrl.subfields[ctrl.search_field]" ng-value="field.id">{{field.label}}</option>
        </select>
        <input ng-if="ctrl.field_types[ctrl.search_field] != 'boolean'" name="search" type="text" ng-model="ctrl.search_text" ng-keypress="ctrl.search($event)">
    </div>
    
    <div class="info" ng-if="!ctrl.loading">{{ctrl.products.length}} / {{ctrl.allProducts.length}} produits</div>
    <div class="panel panel-default">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th>Nom du produit</th>
                    <th>SKU</th>
                    <th>Stock</th>
                    <th>{{ rubedo.translate('Blocks.UserOrders.Status') }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in ctrl.products track by $index">
                    <td><img ng-if="ctrl.products.length < 70 && item.fields.image" ng-src="{{rubedo.imageUrl.getUrlByMediaId(item.fields.image ,{width:'50px',mode:'boxed'})}}" alt="product img"></td>
                    <td>{{ item.text }}</td>
                    <td>{{ item.productProperties.sku }}</td>
                    <td data-toggle="tooltip" title="{{ item.productProperties.sku }}" ng-click="ctrl.copyToClipboard(item.productProperties.sku)">{{ item.details.stock }}</td>
                    <td>{{ item.online }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="loading" ng-if="ctrl.loading"><i class="fa fa-spinner fa-pulse"></i></div>
</div>


<style>
/* ================================ */
/*          RACCOURCIS              */
/* ================================ */

div.raccourcis_container {
    display: flex;
    margin-bottom: 1rem;
}

div.raccourci {
    background-color: #d5c5b5;
    padding: 0.5rem 1rem;
    margin-right: 1rem;
    border-radius: 50px;
    color: white;
    cursor: pointer;
    font-size: 1rem;
    font-family: calibri;
    box-shadow: #6f6860 0 1px 3px;
}

div.raccourci_active {
    box-shadow: inset #6f6860 0 1px 3px;
}
/* ================================ */
/* ================================ */
</style>