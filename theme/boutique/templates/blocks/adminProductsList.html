<div ng-if="rubedo.current.user" ng-controller="AdminProductsListController as ctrl">
    
    <div class="search_container">
        <select ng-model="ctrl.search_field" class="search field">
            <option ng-repeat="field in ctrl.fields" ng-value="field.id">{{field.label}}</option>
        </select>
        <select ng-if="ctrl.search_field && ctrl.subfields[ctrl.search_field]" ng-model="ctrl.search_subfield" class="search subfield" ng-change="ctrl.search('skip')">
            <option ng-repeat="field in ctrl.subfields[ctrl.search_field]" ng-value="field.id">{{field.label}}</option>
        </select>
        <input name="search" type="text" ng-model="ctrl.search_text" ng-keypress="ctrl.search($event)">
    </div>
    <i class="fa fa-spinner fa-pulse" ng-if="ctrl.loading"></i>
    
    <div class="info" ng-if="!ctrl.loading">{{ctrl.products.length}} / {{ctrl.allProducts.length}} produits</div>
    <div class="panel panel-default">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th></th>
                    <th>Nom du produit</th>
                    <th>{{ rubedo.translate('Blocks.UserOrders.Status') }}</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in ctrl.products track by $index">
                    <td><img ng-if="ctrl.products.length < 70 && item.fields.image" ng-src="{{rubedo.imageUrl.getUrlByMediaId(item.fields.image ,{width:'50px',mode:'boxed'})}}" alt="product img"></td>
                    <td>{{ item.text }}</td>
                    <td>{{ item.status }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
